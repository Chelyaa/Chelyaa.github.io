var SimpleGE=function(t){this.canvas=document.getElementById(t),this.ctx=this.canvas.getContext("2d"),this.width=600,this.height=600,null!=t&&(this.canvas.style.position="absolute",this.canvas.style.top=0,this.canvas.style.left=0,this.canvas.width=this.width,this.canvas.height=this.height),this.Scene=new Scenes(this.ctx),this.render=new Render(this.ctx,this.Scene),this.renderCanvas=function(){this.render.render()}},ObjectClass=function(){this.id,this.type,this.props={},this.styles={}},Objects=function(t){this.counter=0,this.objects=[],this.ctx=t,this.createObj=function(t,e){var i=new ObjectClass;return i.type=t,i.id=this.counter,this.counter++,i.props=e,this.objects.push(i),i.props.layer=e.layer||0,i}},Render=function(t,e){this.ctx=t,this.scenes=e,this.render=function(){var t=this.scenes.nowScene;for(var e in t.layers)for(var i in t.layers[e]){var s=t.layers[e][i],r=s.type;switch(r){case"rect":this.renderRect(s.props,s.styles);break;case"circle":this.renderCircle(s.props,s.styles);break;case"ellipse":this.renderEllipse(s.props,s.styles);break;case"line":this.renderLine(s.props,s.styles);break;case"curveLine":this.renderCurveLine(s.props,s.styles)}}},this.renderRect=function(t,e){var i=t.x||0,s=t.y||0,r=t.width||t.w||0,h=t.height||t.h||0;i-=r/2,s-=h/2;var c=e.borderWidth||e.borderW||0,l=e.fillColor||e.fillC||-1,n=e.borderColor||e.borderC||"black",o=e.rotate*Math.PI/180||0,a=e.alpha||1;this.ctx.globalAlpha=a,this.ctx.save(),this.ctx.translate(i+r/2,s+h/2),this.ctx.rotate(o),c>0&&(this.ctx.lineWidth=c,this.ctx.strokeStyle=n,this.ctx.strokeRect(-(r+c)/2,-(h+c)/2,r+c,h+c)),l!=-1&&(this.ctx.fillStyle=l,this.ctx.fillRect(-r/2,-h/2,r,h)),this.ctx.restore()},this.renderCircle=function(t,e){var i=t.x||0,s=t.y||0,r=t.radius||0,h=e.borderWidth||e.borderW||0,c=e.fillColor||e.fillC||-1,l=e.borderColor||e.borderC||"black",n=e.alpha||1;this.ctx.globalAlpha=n,this.ctx.beginPath(),this.ctx.arc(i,s,r+h/2,0,2*Math.PI,!1),c!=-1&&(this.ctx.fillStyle=c,this.ctx.fill()),h>0&&(this.ctx.lineWidth=h,this.ctx.strokeStyle=l,this.ctx.stroke())},this.renderEllipse=function(t,e){var i=t.x||0,s=t.y||0,r=t.width||t.w,h=t.height||t.h,c=e.borderWidth||e.borderW||0,l=e.fillColor||e.fillC||-1,n=e.borderColor||e.borderC||"black",o=e.rotate*Math.PI/180,a=e.alpha||1;this.ctx.globalAlpha=a,this.ctx.beginPath(),this.ctx.ellipse(i,s,r+c/2,h+c/2,o,0,2*Math.PI),l!=-1&&(this.ctx.fillStyle=l,this.ctx.fill()),c>0&&(this.ctx.lineWidth=c,this.ctx.strokeStyle=n,this.ctx.stroke())},this.renderLine=function(t,e){var i=t.x||0,s=t.y||0,r=t.endX||0,h=t.endY||0,c=t.width||t.w,l=e.borderWidth||e.borderW||0,n=e.fillColor||e.fillC||-1,o=e.borderColor||e.borderC||"black",a=e.alpha||1;this.ctx.globalAlpha=a,n!=-1&&(this.ctx.beginPath(),this.ctx.moveTo(i-l,s-l),this.ctx.lineTo(r+l,h+l),this.ctx.strokeStyle=o,this.ctx.lineWidth=c+2*l,this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(i,s),this.ctx.lineTo(r,h),this.ctx.strokeStyle=n,this.ctx.lineWidth=c,this.ctx.stroke())},this.renderCurveLine=function(t,e){var i=t.points,s=t.width||t.w,r=t.layer||t.l||0,h=(e.borderWidth||e.borderW||0,e.fillColor||e.fillC||-1);e.borderColor||e.borderC||"black",e.alpha||1;if(h!=-1){var c=[];for(var l in i){var n=i[l].x,o=i[l].y;c.push(n),c.push(o)}for(var a=0;a<c.length-3;a+=2){var d=c[a],x=c[a+1],b=c[a+2],p=c[a+3];this.renderLine({x:d,y:x,endX:b,endY:p,w:s,l:r},e)}}}},Scene=function(t){this.id,this.ctx=t,this.objects=new Objects(this.ctx),this.layers={},this.createObj=function(t,e){var i=this.objects.createObj(t,e),s=i.props.layer||i.props.l||0,r=i.id;return this.layers[s]=this.layers[s]||{},this.layers[s][r]=i,i}},Scenes=function(t){this.ctx=t,this.counter=0,this.scenes=[],this.nowScene,this.createScene=function(){var t=new Scene(this.ctx);return t.id=this.counter,0==this.counter&&(this.nowScene=t),this.counter++,t}};