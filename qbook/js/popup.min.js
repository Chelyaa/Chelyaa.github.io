(function(){function m(a){var f=new q,b=f.drawFunctions,d=a.typeAnimate;if("animation"in a&&!("animationBgc"in a)&&!("animationContent"in a)){var c=a.animation,e=a.duration,l=n(a.contentEl),k=n(a.bcgEl);"string"==typeof c&&(c=[c]);for(var h=0;h<c.length;h++){var g=p({typeAnim:d,drawName:c[h]}),g=b[g];f.animate({duration:e,element:a.contentEl,draw:g,startStyle:l});f.animate({duration:e,element:a.bcgEl,draw:g,startStyle:k})}}else if(!("animation"in a)&&"animationBcg"in a&&"animationContent"in a){e=
a.animationContent;c=a.animationBcg;l=n(a.contentEl);k=n(a.bcgEl);"string"==typeof e.animation&&(e.animation=[e.animation]);"string"==typeof c.animation&&(c.animation=[c.animation]);for(h=0;h<e.animation.length;h++)g=p({typeAnim:d,drawName:e.animation[h]}),f.animate({duration:e.duration,element:a.contentEl,draw:b[g],startStyle:l});for(h=0;h<c.animation.length;h++)l=p({typeAnim:d,drawName:c.animation[h]}),f.animate({duration:c.duration,element:a.bcgEl,draw:b[l],startStyle:k})}}function q(){var a={},
f=0;this.timingFunctions={linear:function(b){return b}};this.animate=function(b){var d=this.timingFunctions.linear,c=performance.now(),e=f;f++;a[e]={};a[e].firstStep=1;requestAnimationFrame(function k(a){a=(a-c)/b.duration;1<a&&(a=1);0>a&&(a=0);var h=d(a);b.draw({progress:h,element:b.element,startStyle:b.startStyle,idAnimation:e});1>a&&requestAnimationFrame(k)})};this.drawFunctions={fadeIn:function(b){var d=b.progress,c=b.element,e=b.idAnimation;a[e].firstStep&&(a[e].startOpacity=b.startStyle.opacity,
c.style.opacity=0,a[e].firstStep=0);c.style.opacity=d*a[e].startOpacity;1==d&&delete a[e]},fadeOut:function(b){var d=b.progress,c=b.element,e=b.idAnimation;a[e].firstStep&&(a[e].startOpacity=b.startStyle.opacity,a[e].firstStep=0);c.style.opacity=(1-d)*a[e].startOpacity;1==d&&delete a[e]},dropUp:function(b){var d=b.progress,c=b.element;b=b.idAnimation;a[b].firstStep&&(a[b].startPosition=g(c).top,c.style.top=window.innerHeight+"px",a[b].firstStep=0);c.style.top=(1-d)*window.innerHeight+a[b].startPosition+
"px";1==d&&delete a[b]},dropDown:function(b){var d=b.progress,c=b.element;b=b.idAnimation;a[b].firstStep&&(a[b].position=g(c).top,a[b].startPosition=0-c.offsetHeight,a[b].deltaPosition=-1*a[b].startPosition+a[b].position,c.style.top=0-c.offsetHeight+"px",a[b].firstStep=0);c.style.top=a[b].startPosition+a[b].deltaPosition*d+"px";1==d&&delete a[b]},dropRight:function(b){var d=b.progress,c=b.element;b=b.idAnimation;a[b].firstStep&&(a[b].position=g(c).left,a[b].startPosition=0-c.offsetWidth,a[b].deltaPosition=
-1*a[b].startPosition+a[b].position,c.style.left=0-c.offsetWidth+"px",c.style.position="absolute",a[b].firstStep=0);c.style.left=a[b].startPosition+a[b].deltaPosition*d+"px";1==d&&delete a[b]},dropLeft:function(b){var d=b.progress,c=b.element;b=b.idAnimation;a[b].firstStep&&(a[b].startPosition=g(c).left,c.style.left=window.innerWidth+"px",c.style.position="absolute",a[b].firstStep=0);c.style.left=(1-d)*window.innerWidth+a[b].startPosition+"px";1==d&&delete a[b]},scaleOut:function(b){var d=b.progress,
c=b.idAnimation;b.element.style.transform="scale("+d+")";1==d&&delete a[c]},scaleIn:function(b){var d=b.progress,c=b.idAnimation;b.element.style.transform="scale("+(1-d)+")";1==d&&delete a[c]},reverseDropUp:function(b){var d=b.progress,c=b.element;b=b.idAnimation;a[b].firstStep&&(a[b].startPosition=g(c).top,a[b].deltaPosition=window.innerHeight-a[b].startPosition,a[b].firstStep=0);c.style.top=a[b].startPosition+a[b].deltaPosition*d+"px";1==d&&delete a[b]},reverseDropDown:function(b){var d=b.progress,
c=b.element;b=b.idAnimation;a[b].firstStep&&(a[b].startPosition=g(c).top,a[b].deltaPosition=c.offsetHeight+a[b].startPosition,a[b].firstStep=0);c.style.top=0-c.offsetHeight+a[b].deltaPosition*(1-d)+"px";1==d&&delete a[b]},reverseDropRight:function(b){var d=b.progress,c=b.element;b=b.idAnimation;a[b].firstStep&&(a[b].startPosition=g(c).left,a[b].deltaPosition=c.offsetWidth+a[b].startPosition,a[b].firstStep=0);c.style.left=0-c.offsetWidth+a[b].deltaPosition*(1-d)+"px";1==d&&delete a[b]},reverseDropLeft:function(b){var d=
b.progress,c=b.element;b=b.idAnimation;a[b].firstStep&&(a[b].startPosition=g(c).left,a[b].deltaPosition=window.innerWidth-a[b].startPosition,a[b].firstStep=0,c.style.left=a[b].startPosition+"px");c.style.left=a[b].startPosition+a[b].deltaPosition*d+"px";1==d&&delete a[b]}}}function t(a){new q;var f=a.self;a.bcg.addEventListener("click",function(){f.hide()})}function g(a){if(a.getBoundingClientRect){a=a.getBoundingClientRect();var f=document.body,b=document.documentElement;return{top:Math.round(a.top+
(window.pageYOffset||b.scrollTop||f.scrollTop)-(b.clientTop||f.clientTop||0)),left:Math.round(a.left+(window.pageXOffset||b.scrollLeft||f.scrollLeft)-(b.clientLeft||f.clientLeft||0))}}for(b=f=0;a;)f+=parseInt(a.offsetTop),b+=parseInt(a.offsetLeft),a=a.offsetParent;return{top:f,left:b}}function p(a){var f=a.drawName;if("show"==a.typeAnim)switch(f){case "fade":return"fadeIn";case "scale":return"scaleOut";default:return f}else switch(f){case "fade":return"fadeOut";case "dropUp":return"reverseDropDown";
case "dropDown":return"reverseDropUp";case "dropRight":return"reverseDropLeft";case "dropLeft":return"reverseDropRight";case "scale":return"scaleIn"}}function n(a){return window.getComputedStyle?getComputedStyle(a):a.currentStyle}var r=document.createElement("div");document.body.appendChild(r);r.className="empty-bcg";window.Popup=function(a){var f=null,b=null,d=a.window,c="none"==a.background?document.getElementsByClassName("empty-bcg")[0]:a.background,e=a.content,g=c.style,k=e.style;a.interactiveBcg&&
(c.classList.add("window-bcg"),t({bcg:c,content:e,self:this}));d.classList.add("windowHidden");this.setAnimationForShow=function(b){f=b};this.setAnimationForHide=function(a){b=a};this.show=function(b){b=void 0===b?null:b;document.body.classList.add("withoutOverflow");d.classList.remove("windowHidden");d.classList.add("windowActive");null!=b?(b.contentEl=e,b.bcgEl=c,b.typeAnimate="show",m(b)):null!=f&&(b=f,b.contentEl=e,b.bcgEl=c,b.typeAnimate="show",m(b));c.style=g;e.style=k};this.hide=function(a){a=
void 0===a?null:a;d.classList.remove("windowActive");null!=a?(a.contentEl=e,a.bcgEl=c,a.typeAnimate="hide",m(a)):null!=b&&(a=b,a.contentEl=e,a.bcgEl=c,a.typeAnimate="hide",m(a));!("animation"in a)||"animationBgc"in a||"animationContent"in a?!("animation"in a)&&"animationBcg"in a&&"animationContent"in a?a.animationBcg.duration>a.animationContent.duration?setTimeout(function(){d.classList.add("windowHidden");document.body.classList.remove("withoutOverflow");c.style=g;e.style=k},a.animationBcg.duration-
1):setTimeout(function(){d.classList.add("windowHidden");document.body.classList.remove("withoutOverflow");c.style=g;e.style=k},a.animationContent.duration-1):(d.classList.add("windowHidden"),document.body.classList.remove("withoutOverflow"),c.style=g,e.style=k):setTimeout(function(){d.classList.add("windowHidden");document.body.classList.remove("withoutOverflow");c.style=g;e.style=k},a.duration-1)}}})();